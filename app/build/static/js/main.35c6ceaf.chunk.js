(this["webpackJsonpsuyo-app"]=this["webpackJsonpsuyo-app"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(14),r=n.n(o),s=n(15),a=n(2),i=n(35),u=n(5),j=n(10),l=n(17),d=n(1),b={width:"100%",height:"100%"},h={lat:6.2471638,lng:-75.5765707},p=function(e){var t=e.plots,n=Object(l.d)({googleMapsApiKey:"AIzaSyDODLwbcfIZ9-W3Lw0ky0hAVjBYdRZAms8"}),o=n.isLoaded,r=n.loadError,s=Object(c.useRef)(),a=Object(c.useState)(null),i=Object(j.a)(a,2),u=i[0],p=i[1],O=Object(c.useCallback)((function(e){s.current=e}),[]);return Object(d.jsxs)(d.Fragment,{children:[r&&Object(d.jsx)("h1",{children:"Error"}),o?Object(d.jsxs)(l.a,{mapContainerStyle:b,center:h,zoom:12,onLoad:O,children:[t.map((function(e){return Object(d.jsx)(l.c,{position:e.coords,onClick:function(){return p(e)}},e.id)})),u?Object(d.jsx)(l.b,{position:u.coords,children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:u.owner}),Object(d.jsx)("p",{style:{marginTop:"5px",fontSize:"15px"},children:u.address})]})}):null]}):Object(d.jsx)("h1",{children:"Loading..."})]})},O=n(19),m=n(12),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(j.a)(t,2),o=n[0],r=n[1],s=function(e){return r(e)},a=function(e){r(Object(u.a)(Object(u.a)({},o),{},Object(O.a)({},e.target.name,e.target.value)))},i=function(){return r(e)};return{form:o,handleInputChange:a,handleChange:s,handleInputReset:i}};g.propTypes={initialForm:n.n(m).a.object};var x=g,f=(n(43),{owner:"",address:""}),v=function(e){var t=e.addPlot,n=x(f),c=n.form,o=n.handleInputChange,r=c.owner,s=c.address;return Object(d.jsxs)("div",{className:"plots__container",children:[Object(d.jsx)("h1",{children:"Registro de predio"}),Object(d.jsx)("p",{children:"Ingrese los datos para registrar su propiedad."}),Object(d.jsxs)("form",{className:"plots__container-form",onSubmit:function(e){e.preventDefault(),r&&s||console.log("Es necesario completar todos los campos"),t({owner:r,address:s})},children:[Object(d.jsxs)("label",{htmlFor:"owner",children:["Ingresar un due\xf1o:",Object(d.jsx)("input",{onChange:o,id:"owner",name:"owner",type:"text",value:r})]}),Object(d.jsxs)("label",{htmlFor:"address",children:["Direcci\xf3n:",Object(d.jsx)("input",{onChange:o,id:"address",name:"address",type:"text",value:s})]}),Object(d.jsx)("button",{type:"submit",children:"Registrar Predio"})]})]})},C=(n(44),n(11)),y=n.n(C),w="/api/plots",N=Object(c.createContext)(),_=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1],r=Object(c.useContext)(N).user.token;Object(c.useEffect)((function(){(function(e){var t=e.token,n={Authorization:"Bearer ".concat(t)};return y.a.get("".concat(w),{headers:n}).then((function(e){return e.data.plots}))})({token:r}).then(o)}),[r]);return Object(d.jsx)("div",{className:"home",children:Object(d.jsxs)("div",{className:"plots",children:[Object(d.jsx)(v,{addPlot:function(e){(function(e){var t=e.query,n={apiKey:"".concat("C6R5htIDxW7Fuy7v2YtXWAfZCfkQZg2tpWbfDgpbSzU"),q:"".concat(t,",  Antioquia")};return y.a.get("https://geocode.search.hereapi.com/v1/geocode",{params:n}).then((function(e){return e.data.items[0]})).catch((function(e){return console.log(e)}))})({query:e.address}).then((function(t){var c=t.position;(function(e){var t=e.token,n=e.plot,c={Authorization:"Bearer ".concat(t)};return y.a.post("".concat(w),n,{headers:c}).then((function(e){return e.data.createdPlot}))})({token:r,plot:Object(u.a)(Object(u.a)({},e),{},{coords:c})}).then((function(e){o([].concat(Object(i.a)(n),[e]))}))}))}}),Object(d.jsx)("div",{className:"plots__map",children:Object(d.jsx)(p,{plots:n})})]})})},S=(n(63),function(){var e=Object(c.useContext)(N),t=e.user,n=e.logout;return Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsx)("h1",{children:t.username}),Object(d.jsx)("button",{type:"button",onClick:n,children:"Salir"})]})}),L=(n(64),function(){return Object(d.jsx)("div",{className:"notfound",children:Object(d.jsxs)("div",{className:"notfound__content",children:[Object(d.jsx)("h1",{children:"404"}),Object(d.jsx)("h2",{children:"OOPS!"}),Object(d.jsx)("h3",{children:"Esta P\xe1gina No Existe."})]})})}),k=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S,{}),Object(d.jsxs)(a.d,{children:[Object(d.jsx)(a.b,{exact:!0,path:"/",component:_}),Object(d.jsx)(a.b,{component:L})]})]})},I=n(20),A=["component","isLogged"],D=function(e){var t=e.component,n=e.isLogged,c=Object(I.a)(e,A);return Object(d.jsx)(a.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return n?Object(d.jsx)(a.a,{to:"/"}):Object(d.jsx)(t,Object(u.a)({},e))}}))},E=["component","isLogged"],R=function(e){var t=e.component,n=e.isLogged,c=Object(I.a)(e,E);return Object(d.jsx)(a.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return n?Object(d.jsx)(t,Object(u.a)({},e)):Object(d.jsx)(a.a,{to:"/login"})}}))},z=function(e){var t=e.isLogin,n=e.changeLoginStatus,c=t?"auth__menu right":"auth__menu left";return Object(d.jsx)("div",{className:c,children:Object(d.jsxs)("div",{className:"auth__menu-container",children:[Object(d.jsx)("h1",{children:t?"\xbfA\xfan no tienes una cuenta?":"\xa1Bienvenido!"}),Object(d.jsxs)("p",{children:[t?"Si ya tienes una cuenta inicia con tus datos":"Crea un cuenta nuevo en pocos pasos","."]}),Object(d.jsx)("button",{onClick:n,type:"button",children:t?"Registrarse":"Iniciar Sesi\xf3n"})]})})},P={username:"",password:""},F=function(){var e=x(P),t=e.form,n=e.handleInputChange,o=t.username,r=t.password,s=Object(c.useContext)(N).login;return Object(d.jsx)("div",{className:"login",children:Object(d.jsxs)("div",{className:"login__container",children:[Object(d.jsx)("h1",{children:"Ingresar"}),Object(d.jsxs)("form",{className:"login__container-form",onSubmit:function(e){e.preventDefault(),o&&r?s({username:o,password:r}):console.log("Debe ingresar el nombre de usuario o contrase\xf1a.")},children:[Object(d.jsx)("input",{name:"username",type:"text",placeholder:"Nombre de usuario/Email",value:o,onChange:n}),Object(d.jsx)("input",{name:"password",type:"password",placeholder:"Contrase\xf1a",value:r,onChange:n}),Object(d.jsx)("button",{type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})},Z={username:"",email:"",password:""},B=function(){var e=x(Z),t=e.form,n=e.handleInputChange,o=t.username,r=t.email,s=t.password,a=Object(c.useContext)(N).register;return Object(d.jsx)("div",{className:"register",children:Object(d.jsxs)("div",{className:"register__container",children:[Object(d.jsx)("h1",{children:"Registro de cuenta"}),Object(d.jsxs)("form",{className:"register__container-form",onSubmit:function(e){e.preventDefault(),o&&r&&s?a({username:o,email:r,password:s}):console.log("Debe ingresar el nombre de usuario o contrase\xf1a.")},children:[Object(d.jsx)("input",{name:"username",type:"text",placeholder:"Nombre de usuario",value:o,onChange:n}),Object(d.jsx)("input",{name:"email",type:"text",placeholder:"Email",value:r,onChange:n}),Object(d.jsx)("input",{name:"password",type:"password",placeholder:"Contrase\xf1a",value:s,onChange:n}),Object(d.jsx)("button",{type:"submit",children:"Registrar"})]})]})})},q=(n(68),function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],o=t[1];return Object(d.jsx)("div",{className:"auth",children:Object(d.jsxs)("div",{className:"auth__container",children:[Object(d.jsx)(F,{}),Object(d.jsx)(B,{}),Object(d.jsx)(z,{isLogin:n,changeLoginStatus:function(){return o(!n)}})]})})}),J=function(){var e=Object(c.useContext)(N).user;return Object(d.jsx)(s.a,{children:Object(d.jsxs)(a.d,{children:[Object(d.jsx)(D,{exact:!0,path:"/login",component:q,isLogged:e.isLogged}),Object(d.jsx)(R,{path:"/",component:k,isLogged:e.isLogged})]})})},W="/api/users",K=function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}},T=function(e){var t=e.children,n=Object(c.useState)(K),o=Object(j.a)(n,2),r=o[0],s=o[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(r))}),[r]),Object(d.jsx)(N.Provider,{value:{user:r,login:function(e){var t=e.username,n=e.password;(function(e){var t="".concat(W,"/login");return y.a.post(t,e).then((function(e){return e.data})).catch((function(e){return console.log("here in error",e)}))})(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?{email:t,password:n}:e).then((function(e){if(e){var t=e.username,n=e.token;s({username:t,token:n,isLogged:!0})}})).catch((function(e){return console.log(e)}))},logout:function(){return s({isLogged:!1})},register:function(e){(function(e){return y.a.post(W,e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))})(e).then((function(e){if(console.log(e),e){var t=e.username,n=e.token;s({username:t,token:n,isLogged:!0})}})).catch((function(e){return console.log(e)}))}},children:t})};n(69);var Y=function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsx)(T,{children:Object(d.jsx)(J,{})})})};r.a.render(Object(d.jsx)(Y,{}),document.getElementById("app"))}},[[70,1,2]]]);
//# sourceMappingURL=main.35c6ceaf.chunk.js.map